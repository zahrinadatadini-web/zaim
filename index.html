<!doctype html>
<html lang="id">
 <head>
  <meta charset="UTF-8">
  <title>Portofolio Guru - Ahmad Zaim Kholili</title><!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script><!-- Canva SDKs -->
  <script src="/_sdk/element_sdk.js"></script>
  <script src="/_sdk/data_sdk.js"></script>
  <style>
    body {
      box-sizing: border-box;
    }
  </style>
  <script>
    // Konfigurasi awal untuk teks yang bisa diedit dari Canva
    const defaultConfig = {
      header_title: "Portofolio Digital Guru",
      profile_name: "Ahmad Zaim Kholili S. Pd. Gr.",
      profile_subtitle: "Guru Produktif TSM - SMKN 1 GROGOL",
      bidang_keahlian: "Teknik Sepeda Motor (TSM)",
      satuan_pendidikan: "SMKN 1 GROGOL",
      peran: "Guru Produktif & Pengembang Media",
      about_teacher_text: "Portofolio digital ini menampilkan rekam jejak profesional Ahmad Zaim Kholili S. Pd. Gr. sebagai guru produktif TSM di SMKN 1 Grogol, meliputi pengembangan diri, organisasi profesi, serta karya inovatif berbasis teknologi.",
      section_pengembangan_title: "Kegiatan Pengembangan Diri",
      section_pengembangan_desc: "Kegiatan webinar yang diikuti sebagai upaya peningkatan kompetensi profesional dan pedagogik.",
      section_organisasi_title: "Pengalaman Organisasi Profesi",
      section_pendampingan_title: "Pendampingan Rekan Sejawat",
      section_karya_title: "Kumpulan Karya Inovasi / Implementasi Pembelajaran Berbasis Teknologi",
      section_prestasi_title: "Prestasi dan Penghargaan",
      karya_item_1: "Pemanfaatan Canva untuk media pembelajaran interaktif",
      karya_item_2: "Pemanfaatan Wayground sebagai simulasi dan latihan berbasis web",
      karya_item_3: "Integrasi Google Workspace for Education (GWfE) dalam manajemen kelas digital",
      karya_item_4: "Pemanfaatan YouTube sebagai kanal pembelajaran asinkron",
      karya_item_5: "Pengembangan modul digital dan lembar kerja elektronik",
      pengembangan_item_1: "Webinar roadshow Assembler EDU tentang 3D/AR",
      pengembangan_item_2: "Webinar Pemantik Series #1 tentang Chromebook",
      pengembangan_item_3: "Webinar: Pemanfaatan Teknologi Digital untuk Penilaian Autentik",
      organisasi_item_1: "Anggota MGMP TSM Kabupaten Kediri",
      organisasi_item_2: "Aktif dalam kegiatan penyusunan perangkat ajar MGMP TSM",
      pendampingan_item_1: "Pendampingan implementasi media pembelajaran digital untuk guru TSM",
      pendampingan_item_2: "Bimbingan penggunaan platform Canva untuk pembuatan materi ajar",
      pendampingan_item_3: "Pelatihan penggunaan Google Classroom untuk pembelajaran daring",
      timeline_tab_beranda: "Beranda",
      timeline_tab_tentang: "Tentang",
      timeline_tab_kegiatan: "Kegiatan",
      timeline_tab_sosmed: "Sosial Media",
      tentang_title: "Ringkasan Profil",
      tentang_content: "Guru Produktif Teknik Sepeda Motor, masuk SMKN 1 Grogol sejak 2019 - sekarang.\n\nPernah mendapat tugas tambahan sebagai Kepala Kompetensi Keahlian Teknik Sepeda Motor, Asisten Kurikulum Bagian Pembelajaran, Wakil Kepala Sekolah Bidang Kehumasan dan sekarang menjadi Wali Kelas.",
      kegiatan_title: "Rekap Singkat Kegiatan Webinar",
      kegiatan_desc: "Berikut beberapa highlight kegiatan webinar yang berhubungan langsung dengan peningkatan kualitas pembelajaran di kelas TSM:",
      kegiatan_item_1: "Penguatan pembelajaran berbasis proyek untuk memfasilitasi kompetensi kerja nyata di dunia industri otomotif.",
      kegiatan_item_2: "Adaptasi kurikulum Merdeka pada konteks pembelajaran vokasi, khususnya pada kompetensi keahlian Teknik Sepeda Motor.",
      kegiatan_item_3: "Optimalisasi penggunaan platform digital untuk penilaian autentik dan portofolio siswa.",
      instagram_link: "https://www.instagram.com/pakzaimoto?igsh=MWx1ZzE3Z3Z6dnJqYQ==",
      instagram_text: "@pakzaimoto",
      tiktok_link: "https://www.tiktok.com/@tsm_smkn1grogol?_r=1&_t=ZS-91bS5DPxJtl",
      tiktok_text: "@tsm_smkn1grogol",
      youtube_link: "https://youtube.com/@pakahmadzaimsmk?si=jC3wkniHPxk8zmN7",
      youtube_text: "@pakahmadzaimsmk",
      email_link: "mailto:ahmad0415@guru.smk.belajar.id",
      email_text: "ahmad0415@guru.smk.belajar.id",
      background_color: "#f8fafc",
      surface_color: "#ffffff",
      text_color: "#1e293b",
      primary_action_color: "#2563eb",
      secondary_action_color: "#64748b",
      font_family: "system-ui",
      font_size: 16
    };

    // State untuk menyimpan komentar
    let allComments = [];
    let editingCommentId = null;

    // Inisialisasi Data SDK
    (async function initDataSdk() {
      if (!window.dataSdk) {
        return;
      }

      const dataHandler = {
        onDataChanged(data) {
          allComments = data || [];
          renderComments();
        }
      };

      const result = await window.dataSdk.init(dataHandler);
      if (!result.isOk) {
        console.error("Failed to initialize data SDK");
      }
    })();

    // Render komentar
    function renderComments() {
      const commentsList = document.getElementById('commentsList');
      if (!commentsList) return;

      if (allComments.length === 0) {
        commentsList.innerHTML = '<p class="text-sm text-slate-500 text-center py-4">Belum ada komentar. Jadilah yang pertama berkomentar!</p>';
        return;
      }

      commentsList.innerHTML = '';
      
      // Urutkan komentar dari yang terbaru
      const sortedComments = [...allComments].sort((a, b) => {
        return new Date(b.timestamp) - new Date(a.timestamp);
      });

      sortedComments.forEach(comment => {
        const commentEl = document.createElement('div');
        commentEl.className = 'border-b border-slate-200 pb-3 mb-3 last:border-b-0';
        commentEl.dataset.commentId = comment.__backendId;

        const date = new Date(comment.timestamp);
        const formattedDate = date.toLocaleDateString('id-ID', { 
          day: 'numeric', 
          month: 'long', 
          year: 'numeric',
          hour: '2-digit',
          minute: '2-digit'
        });

        const isEditing = editingCommentId === comment.__backendId;

        if (isEditing) {
          commentEl.innerHTML = `
            <div class="flex items-start gap-2">
              <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                <span class="text-xs font-semibold text-blue-600">${comment.name.charAt(0).toUpperCase()}</span>
              </div>
              <div class="flex-1">
                <input type="text" id="editName_${comment.__backendId}" value="${comment.name}" class="w-full px-2 py-1 text-sm border border-slate-300 rounded mb-2" placeholder="Nama">
                <textarea id="editComment_${comment.__backendId}" class="w-full px-2 py-1 text-sm border border-slate-300 rounded resize-none" rows="3" placeholder="Komentar">${comment.comment}</textarea>
                <div class="flex gap-2 mt-2">
                  <button onclick="saveEditComment('${comment.__backendId}')" class="text-xs px-3 py-1 bg-blue-600 text-white rounded hover:bg-blue-700">Simpan</button>
                  <button onclick="cancelEditComment()" class="text-xs px-3 py-1 bg-slate-300 text-slate-700 rounded hover:bg-slate-400">Batal</button>
                </div>
              </div>
            </div>
          `;
        } else {
          commentEl.innerHTML = `
            <div class="flex items-start gap-2">
              <div class="w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center flex-shrink-0">
                <span class="text-xs font-semibold text-blue-600">${comment.name.charAt(0).toUpperCase()}</span>
              </div>
              <div class="flex-1">
                <div class="flex items-center justify-between mb-1">
                  <h4 class="font-semibold text-sm text-slate-900">${comment.name}</h4>
                  <div class="flex gap-2">
                    <button onclick="startEditComment('${comment.__backendId}')" class="text-xs text-blue-600 hover:text-blue-800">Edit</button>
                    <button onclick="deleteComment('${comment.__backendId}')" class="text-xs text-red-600 hover:text-red-800">Hapus</button>
                  </div>
                </div>
                <p class="text-sm text-slate-700 mb-1">${comment.comment}</p>
                <p class="text-xs text-slate-500">${formattedDate}</p>
              </div>
            </div>
          `;
        }

        commentsList.appendChild(commentEl);
      });
    }

    // Submit komentar baru
    async function submitComment(event) {
      event.preventDefault();

      const nameInput = document.getElementById('commentName');
      const commentInput = document.getElementById('commentText');
      const submitBtn = document.getElementById('submitCommentBtn');

      const name = nameInput.value.trim();
      const comment = commentInput.value.trim();

      if (!name || !comment) {
        showToast('Nama dan komentar harus diisi!');
        return;
      }

      if (allComments.length >= 999) {
        showToast('Maksimal 999 komentar telah tercapai!');
        return;
      }

      // Tampilkan loading
      submitBtn.disabled = true;
      submitBtn.textContent = 'Mengirim...';

      const newComment = {
        name: name,
        comment: comment,
        timestamp: new Date().toISOString(),
        isOwner: false
      };

      const result = await window.dataSdk.create(newComment);

      if (result.isOk) {
        nameInput.value = '';
        commentInput.value = '';
        showToast('Komentar berhasil dikirim!');
      } else {
        showToast('Gagal mengirim komentar. Silakan coba lagi.');
      }

      submitBtn.disabled = false;
      submitBtn.textContent = 'Kirim Komentar';
    }

    // Mulai edit komentar
    function startEditComment(commentId) {
      editingCommentId = commentId;
      renderComments();
    }

    // Batal edit
    function cancelEditComment() {
      editingCommentId = null;
      renderComments();
    }

    // Simpan edit komentar
    async function saveEditComment(commentId) {
      const nameInput = document.getElementById(`editName_${commentId}`);
      const commentInput = document.getElementById(`editComment_${commentId}`);

      const name = nameInput.value.trim();
      const comment = commentInput.value.trim();

      if (!name || !comment) {
        showToast('Nama dan komentar tidak boleh kosong!');
        return;
      }

      const commentToUpdate = allComments.find(c => c.__backendId === commentId);
      if (!commentToUpdate) return;

      const updatedComment = {
        ...commentToUpdate,
        name: name,
        comment: comment
      };

      const result = await window.dataSdk.update(updatedComment);

      if (result.isOk) {
        editingCommentId = null;
        showToast('Komentar berhasil diperbarui!');
      } else {
        showToast('Gagal memperbarui komentar. Silakan coba lagi.');
      }
    }

    // Hapus komentar
    async function deleteComment(commentId) {
      const commentToDelete = allComments.find(c => c.__backendId === commentId);
      if (!commentToDelete) return;

      // Konfirmasi inline
      const commentEl = document.querySelector(`[data-comment-id="${commentId}"]`);
      if (!commentEl) return;

      const originalContent = commentEl.innerHTML;
      commentEl.innerHTML = `
        <div class="bg-red-50 border border-red-200 rounded p-3">
          <p class="text-sm text-red-800 mb-2">Yakin ingin menghapus komentar ini?</p>
          <div class="flex gap-2">
            <button onclick="confirmDelete('${commentId}')" class="text-xs px-3 py-1 bg-red-600 text-white rounded hover:bg-red-700">Ya, Hapus</button>
            <button onclick="cancelDelete('${commentId}', \`${originalContent.replace(/`/g, '\\`').replace(/\$/g, '\\$')}\`)" class="text-xs px-3 py-1 bg-slate-300 text-slate-700 rounded hover:bg-slate-400">Batal</button>
          </div>
        </div>
      `;
    }

    async function confirmDelete(commentId) {
      const commentToDelete = allComments.find(c => c.__backendId === commentId);
      if (!commentToDelete) return;

      const result = await window.dataSdk.delete(commentToDelete);

      if (result.isOk) {
        showToast('Komentar berhasil dihapus!');
      } else {
        showToast('Gagal menghapus komentar. Silakan coba lagi.');
      }
    }

    function cancelDelete(commentId, originalContent) {
      const commentEl = document.querySelector(`[data-comment-id="${commentId}"]`);
      if (commentEl) {
        renderComments();
      }
    }

    // Inisialisasi Element SDK
    (function initElementSdk() {
      if (!window.elementSdk) {
        return;
      }

      window.elementSdk.init({
        defaultConfig,
        onConfigChange: async (config) => {
          const cfg = Object.assign({}, defaultConfig, config || {});

          const baseFont = cfg.font_family || "system-ui";
          const fontStack = `${baseFont}, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif`;
          const baseSize = Number(cfg.font_size || 16);

          const root = document.getElementById("root");
          if (!root) return;

          root.style.fontFamily = fontStack;
          root.style.fontSize = baseSize + "px";

          const headerTitle = document.getElementById("headerTitle");
          const profileName = document.getElementById("profileName");
          const profileSubtitle = document.getElementById("profileSubtitle");
          const bidangKeahlian = document.getElementById("bidangKeahlian");
          const satuanPendidikan = document.getElementById("satuanPendidikan");
          const peran = document.getElementById("peran");
          const sectionPengembanganTitle = document.getElementById("sectionPengembanganTitle");
          const sectionPengembanganDesc = document.getElementById("sectionPengembanganDesc");
          const sectionOrganisasiTitle = document.getElementById("sectionOrganisasiTitle");
          const sectionPendampinganTitle = document.getElementById("sectionPendampinganTitle");
          const sectionKaryaTitle = document.getElementById("sectionKaryaTitle");
          const sectionPrestasiTitle = document.getElementById("sectionPrestasiTitle");
          const karyaItems = [
            document.getElementById("karyaItem1"),
            document.getElementById("karyaItem2"),
            document.getElementById("karyaItem3"),
            document.getElementById("karyaItem4"),
            document.getElementById("karyaItem5")
          ];
          const pengembanganItems = [
            document.getElementById("pengembanganItem1"),
            document.getElementById("pengembanganItem2"),
            document.getElementById("pengembanganItem3")
          ];
          const organisasiItems = [
            document.getElementById("organisasiItem1"),
            document.getElementById("organisasiItem2")
          ];
          const pendampinganItems = [
            document.getElementById("pendampinganItem1"),
            document.getElementById("pendampinganItem2"),
            document.getElementById("pendampinganItem3")
          ];
          const tabBeranda = document.getElementById("tabBeranda");
          const tabTentang = document.getElementById("tabTentang");
          const tabKegiatan = document.getElementById("tabKegiatan");
          const tabSosmed = document.getElementById("tabSosmed");
          const tentangTitle = document.getElementById("tentangTitle");
          const tentangContent = document.getElementById("tentangContent");
          const kegiatanTitle = document.getElementById("kegiatanTitle");
          const kegiatanDesc = document.getElementById("kegiatanDesc");
          const kegiatanItems = [
            document.getElementById("kegiatanItem1"),
            document.getElementById("kegiatanItem2"),
            document.getElementById("kegiatanItem3")
          ];

          if (headerTitle) {
            headerTitle.textContent = cfg.header_title;
            headerTitle.style.fontSize = baseSize * 1.6 + "px";
          }
          if (profileName) {
            profileName.textContent = cfg.profile_name;
            profileName.style.fontSize = baseSize * 1.4 + "px";
          }
          if (profileSubtitle) {
            profileSubtitle.textContent = cfg.profile_subtitle;
            profileSubtitle.style.fontSize = baseSize * 0.95 + "px";
          }
          if (bidangKeahlian) {
            bidangKeahlian.textContent = cfg.bidang_keahlian;
          }
          if (satuanPendidikan) {
            satuanPendidikan.textContent = cfg.satuan_pendidikan;
          }
          if (peran) {
            peran.textContent = cfg.peran;
          }

          if (sectionPengembanganTitle) {
            sectionPengembanganTitle.textContent = cfg.section_pengembangan_title;
            sectionPengembanganTitle.style.fontSize = baseSize * 1.2 + "px";
          }
          if (sectionPengembanganDesc) {
            sectionPengembanganDesc.textContent = cfg.section_pengembangan_desc;
            sectionPengembanganDesc.style.fontSize = baseSize * 0.9 + "px";
          }

          if (sectionOrganisasiTitle) {
            sectionOrganisasiTitle.textContent = cfg.section_organisasi_title;
            sectionOrganisasiTitle.style.fontSize = baseSize * 1.2 + "px";
          }

          if (sectionPendampinganTitle) {
            sectionPendampinganTitle.textContent = cfg.section_pendampingan_title;
            sectionPendampinganTitle.style.fontSize = baseSize * 1.2 + "px";
          }

          if (sectionKaryaTitle) {
            sectionKaryaTitle.textContent = cfg.section_karya_title;
            sectionKaryaTitle.style.fontSize = baseSize * 1.2 + "px";
          }

          if (sectionPrestasiTitle) {
            sectionPrestasiTitle.textContent = cfg.section_prestasi_title;
            sectionPrestasiTitle.style.fontSize = baseSize * 1.2 + "px";
          }

          if (karyaItems[0]) karyaItems[0].textContent = cfg.karya_item_1;
          if (karyaItems[1]) karyaItems[1].textContent = cfg.karya_item_2;
          if (karyaItems[2]) karyaItems[2].textContent = cfg.karya_item_3;
          if (karyaItems[3]) karyaItems[3].textContent = cfg.karya_item_4;
          if (karyaItems[4]) karyaItems[4].textContent = cfg.karya_item_5;

          if (pengembanganItems[0]) pengembanganItems[0].textContent = cfg.pengembangan_item_1;
          if (pengembanganItems[1]) pengembanganItems[1].textContent = cfg.pengembangan_item_2;
          if (pengembanganItems[2]) pengembanganItems[2].textContent = cfg.pengembangan_item_3;

          if (organisasiItems[0]) organisasiItems[0].textContent = cfg.organisasi_item_1;
          if (organisasiItems[1]) organisasiItems[1].textContent = cfg.organisasi_item_2;

          if (pendampinganItems[0]) pendampinganItems[0].textContent = cfg.pendampingan_item_1;
          if (pendampinganItems[1]) pendampinganItems[1].textContent = cfg.pendampingan_item_2;
          if (pendampinganItems[2]) pendampinganItems[2].textContent = cfg.pendampingan_item_3;

          if (tabBeranda) tabBeranda.textContent = cfg.timeline_tab_beranda;
          if (tabTentang) tabTentang.textContent = cfg.timeline_tab_tentang;
          if (tabKegiatan) tabKegiatan.textContent = cfg.timeline_tab_kegiatan;
          if (tabSosmed) tabSosmed.textContent = cfg.timeline_tab_sosmed;

          if (tentangTitle) {
            tentangTitle.textContent = cfg.tentang_title;
            tentangTitle.style.fontSize = baseSize * 1.2 + "px";
          }
          if (tentangContent) {
            tentangContent.textContent = cfg.tentang_content;
            tentangContent.style.fontSize = baseSize * 0.9 + "px";
          }

          if (kegiatanTitle) {
            kegiatanTitle.textContent = cfg.kegiatan_title;
            kegiatanTitle.style.fontSize = baseSize * 1.2 + "px";
          }
          if (kegiatanDesc) {
            kegiatanDesc.textContent = cfg.kegiatan_desc;
            kegiatanDesc.style.fontSize = baseSize * 0.9 + "px";
          }

          if (kegiatanItems[0]) kegiatanItems[0].textContent = cfg.kegiatan_item_1;
          if (kegiatanItems[1]) kegiatanItems[1].textContent = cfg.kegiatan_item_2;
          if (kegiatanItems[2]) kegiatanItems[2].textContent = cfg.kegiatan_item_3;

          const aboutTeacherText = document.getElementById("aboutTeacherText");
          if (aboutTeacherText) {
            aboutTeacherText.innerHTML = cfg.about_teacher_text;
            aboutTeacherText.style.fontSize = baseSize * 0.9 + "px";
          }

          // Update sosial media links dan text
          const instagramLink = document.getElementById("instagramLink");
          const instagramText = document.getElementById("instagramText");
          const tiktokLink = document.getElementById("tiktokLink");
          const tiktokText = document.getElementById("tiktokText");
          const youtubeLink = document.getElementById("youtubeLink");
          const youtubeText = document.getElementById("youtubeText");
          const emailLink = document.getElementById("emailLink");
          const emailText = document.getElementById("emailText");

          if (instagramLink) instagramLink.href = cfg.instagram_link;
          if (instagramText) instagramText.textContent = cfg.instagram_text;
          if (tiktokLink) tiktokLink.href = cfg.tiktok_link;
          if (tiktokText) tiktokText.textContent = cfg.tiktok_text;
          if (youtubeLink) youtubeLink.href = cfg.youtube_link;
          if (youtubeText) youtubeText.textContent = cfg.youtube_text;
          if (emailLink) emailLink.href = cfg.email_link;
          if (emailText) emailText.textContent = cfg.email_text;

          const backgroundColor = cfg.background_color || "#f8fafc";
          const surfaceColor = cfg.surface_color || "#ffffff";
          const textColor = cfg.text_color || "#1e293b";
          const primaryActionColor = cfg.primary_action_color || "#2563eb";
          const secondaryActionColor = cfg.secondary_action_color || "#64748b";

          document.body.style.backgroundColor = backgroundColor;
          root.style.color = textColor;

          const cover = document.getElementById("coverArea");
          const mainCard = document.getElementById("mainCard");
          const leftCard = document.getElementById("leftCard");
          const tabsContainer = document.getElementById("tabsContainer");
          const activeTab = document.querySelector(".tab-active");
          const buttonsPrimary = document.querySelectorAll(".btn-primary");
          const buttonsSecondary = document.querySelectorAll(".btn-secondary");

          if (cover) {
            cover.style.background = "linear-gradient(to right, " + primaryActionColor + ", " + secondaryActionColor + ")";
          }
          if (mainCard) {
            mainCard.style.backgroundColor = surfaceColor;
          }
          if (leftCard) {
            leftCard.style.backgroundColor = surfaceColor;
          }
          if (tabsContainer) {
            tabsContainer.style.backgroundColor = surfaceColor;
          }
          if (activeTab) {
            activeTab.style.borderBottomColor = primaryActionColor;
            activeTab.style.color = textColor;
          }

          buttonsPrimary.forEach((btn) => {
            btn.style.backgroundColor = primaryActionColor;
            btn.style.color = "#ffffff";
          });

          buttonsSecondary.forEach((btn) => {
            btn.style.backgroundColor = secondaryActionColor;
            btn.style.color = "#ffffff";
          });
        },
        mapToCapabilities: (config) => {
          const cfg = Object.assign({}, defaultConfig, config || {});
          return {
            recolorables: [
              {
                get: () => cfg.background_color || "#f8fafc",
                set: (value) => {
                  window.elementSdk.setConfig({ background_color: value });
                }
              },
              {
                get: () => cfg.surface_color || "#ffffff",
                set: (value) => {
                  window.elementSdk.setConfig({ surface_color: value });
                }
              },
              {
                get: () => cfg.text_color || "#1e293b",
                set: (value) => {
                  window.elementSdk.setConfig({ text_color: value });
                }
              },
              {
                get: () => cfg.primary_action_color || "#2563eb",
                set: (value) => {
                  window.elementSdk.setConfig({ primary_action_color: value });
                }
              },
              {
                get: () => cfg.secondary_action_color || "#64748b",
                set: (value) => {
                  window.elementSdk.setConfig({ secondary_action_color: value });
                }
              }
            ],
            borderables: [],
            fontEditable: {
              get: () => cfg.font_family || "system-ui",
              set: (value) => {
                window.elementSdk.setConfig({ font_family: value });
              }
            },
            fontSizeable: {
              get: () => Number(cfg.font_size || 16),
              set: (value) => {
                const numeric = Number(value) || 16;
                window.elementSdk.setConfig({ font_size: numeric });
              }
            }
          };
        },
        mapToEditPanelValues: (config) => {
          const cfg = Object.assign({}, defaultConfig, config || {});
          return new Map([
            ["header_title", cfg.header_title],
            ["profile_name", cfg.profile_name],
            ["profile_subtitle", cfg.profile_subtitle],
            ["bidang_keahlian", cfg.bidang_keahlian],
            ["satuan_pendidikan", cfg.satuan_pendidikan],
            ["peran", cfg.peran],
            ["about_teacher_text", cfg.about_teacher_text],
            ["section_pengembangan_title", cfg.section_pengembangan_title],
            ["section_pengembangan_desc", cfg.section_pengembangan_desc],
            ["section_organisasi_title", cfg.section_organisasi_title],
            ["section_pendampingan_title", cfg.section_pendampingan_title],
            ["section_karya_title", cfg.section_karya_title],
            ["section_prestasi_title", cfg.section_prestasi_title],
            ["karya_item_1", cfg.karya_item_1],
            ["karya_item_2", cfg.karya_item_2],
            ["karya_item_3", cfg.karya_item_3],
            ["karya_item_4", cfg.karya_item_4],
            ["karya_item_5", cfg.karya_item_5],
            ["pengembangan_item_1", cfg.pengembangan_item_1],
            ["pengembangan_item_2", cfg.pengembangan_item_2],
            ["pengembangan_item_3", cfg.pengembangan_item_3],
            ["organisasi_item_1", cfg.organisasi_item_1],
            ["organisasi_item_2", cfg.organisasi_item_2],
            ["pendampingan_item_1", cfg.pendampingan_item_1],
            ["pendampingan_item_2", cfg.pendampingan_item_2],
            ["pendampingan_item_3", cfg.pendampingan_item_3],
            ["timeline_tab_beranda", cfg.timeline_tab_beranda],
            ["timeline_tab_tentang", cfg.timeline_tab_tentang],
            ["timeline_tab_kegiatan", cfg.timeline_tab_kegiatan],
            ["timeline_tab_sosmed", cfg.timeline_tab_sosmed],
            ["tentang_title", cfg.tentang_title],
            ["tentang_content", cfg.tentang_content],
            ["kegiatan_title", cfg.kegiatan_title],
            ["kegiatan_desc", cfg.kegiatan_desc],
            ["kegiatan_item_1", cfg.kegiatan_item_1],
            ["kegiatan_item_2", cfg.kegiatan_item_2],
            ["kegiatan_item_3", cfg.kegiatan_item_3],
            ["instagram_link", cfg.instagram_link],
            ["instagram_text", cfg.instagram_text],
            ["tiktok_link", cfg.tiktok_link],
            ["tiktok_text", cfg.tiktok_text],
            ["youtube_link", cfg.youtube_link],
            ["youtube_text", cfg.youtube_text],
            ["email_link", cfg.email_link],
            ["email_text", cfg.email_text]
          ]);
        }
      });
    })();

    // Fungsi upload foto profil
    function handlePhotoUpload(event) {
      const file = event.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const profilePhoto = document.getElementById('profilePhoto');
          const photoPlaceholder = document.getElementById('photoPlaceholder');
          if (profilePhoto && photoPlaceholder) {
            profilePhoto.src = e.target.result;
            profilePhoto.classList.remove('hidden');
            photoPlaceholder.classList.add('hidden');
          }
        };
        reader.readAsDataURL(file);
      }
    }

    // Fungsi upload cover photo
    function handleCoverUpload(event) {
      const file = event.target.files[0];
      if (file && file.type.startsWith('image/')) {
        const reader = new FileReader();
        reader.onload = function(e) {
          const coverPhoto = document.getElementById('coverPhoto');
          const coverPlaceholder = document.getElementById('coverPlaceholder');
          if (coverPhoto && coverPlaceholder) {
            coverPhoto.src = e.target.result;
            coverPhoto.classList.remove('hidden');
            coverPlaceholder.classList.add('hidden');
          }
        };
        reader.readAsDataURL(file);
      }
    }

    // Fungsi bagikan portofolio
    function sharePortfolio() {
      const shareData = {
        title: 'Portofolio Digital Guru - Ahmad Zaim Kholili',
        text: 'Lihat portofolio digital saya sebagai Guru Produktif TSM di SMKN 1 GROGOL',
        url: window.location.href
      };

      if (navigator.share) {
        navigator.share(shareData).catch(() => {
          copyToClipboard(window.location.href);
        });
      } else {
        copyToClipboard(window.location.href);
      }
    }

    function copyToClipboard(text) {
      const textarea = document.createElement('textarea');
      textarea.value = text;
      textarea.style.position = 'fixed';
      textarea.style.opacity = '0';
      document.body.appendChild(textarea);
      textarea.select();
      document.execCommand('copy');
      document.body.removeChild(textarea);
      
      showToast('Link portofolio berhasil disalin!');
    }

    function showToast(message) {
      const toast = document.createElement('div');
      toast.textContent = message;
      toast.style.cssText = 'position:fixed;bottom:20px;left:50%;transform:translateX(-50%);background:#2563eb;color:white;padding:12px 24px;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,0.15);z-index:1000;font-size:14px;';
      document.body.appendChild(toast);
      setTimeout(() => {
        toast.style.opacity = '0';
        toast.style.transition = 'opacity 0.3s';
        setTimeout(() => document.body.removeChild(toast), 300);
      }, 2000);
    }

    // Logika tab sederhana
    function switchTab(tab) {
      const tabBeranda = document.getElementById("tabBeranda");
      const tabTentang = document.getElementById("tabTentang");
      const tabSosmed = document.getElementById("tabSosmed");
      const berandaPanel = document.getElementById("panelBeranda");
      const tentangPanel = document.getElementById("panelTentang");
      const sosmedPanel = document.getElementById("panelSosmed");

      [tabBeranda, tabTentang, tabSosmed].forEach((el) => {
        if (!el) return;
        el.classList.remove("tab-active");
      });

      [berandaPanel, tentangPanel, sosmedPanel].forEach((el) => {
        if (!el) return;
        el.classList.add("hidden");
      });

      if (tab === "beranda") {
        if (tabBeranda) tabBeranda.classList.add("tab-active");
        if (berandaPanel) berandaPanel.classList.remove("hidden");
      } else if (tab === "tentang") {
        if (tabTentang) tabTentang.classList.add("tab-active");
        if (tentangPanel) tentangPanel.classList.remove("hidden");
      } else if (tab === "sosmed") {
        if (tabSosmed) tabSosmed.classList.add("tab-active");
        if (sosmedPanel) sosmedPanel.classList.remove("hidden");
      }
    }
  </script>
  <style>@view-transition { navigation: auto; }</style>
 </head>
 <body class="h-full">
  <div id="root" class="h-full w-full flex items-center justify-center px-4 py-4">
   <div class="max-w-5xl w-full"><!-- HEADER ATAS -->
    <header class="mb-4">
     <div class="flex items-center justify-between rounded-xl px-4 py-3 shadow-lg border border-slate-200" style="background: linear-gradient(to right, #2563eb, #3b82f6);">
      <div class="flex items-center gap-2">
       <div class="w-8 h-8 rounded-full bg-white/90 flex items-center justify-center text-blue-600 text-lg font-bold">
        AZ
       </div>
       <h1 id="headerTitle" class="text-white font-semibold tracking-wide">Portofolio Digital Guru</h1>
      </div>
      <!-- Tombol "Lihat sebagai Publik" dihapus sesuai permintaan -->
     </div>
    </header>
    <main class="grid grid-cols-1 gap-4"><!-- KOLOM PENUH -->
     <section class="space-y-4"><!-- COVER + PROFIL -->
      <section id="mainCard" class="rounded-xl border border-slate-200 overflow-hidden shadow-2xl bg-white"><!-- Cover Photo dengan Upload -->
      
